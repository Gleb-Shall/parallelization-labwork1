# BMP Image Processing with Parallelization

Проект для обработки BMP изображений с поддержкой распараллеливания вычислений. Включает поворот изображений и применение фильтра Гаусса с использованием OpenMP и std::thread.

## Возможности

- **Обработка BMP изображений**: загрузка, сохранение, поворот по часовой и против часовой стрелки
- **Фильтр Гаусса**: сглаживание изображений с помощью 3x3 ядра
- **Распараллеливание**: поддержка OpenMP и std::thread для ускорения вычислений
- **CI/CD**: автоматическая сборка и тестирование на Ubuntu
- **Бенчмарки**: измерение производительности с разным количеством потоков

## Требования

- C++17 компилятор (GCC, Clang)
- OpenMP (опционально, для лучшей производительности)
- Make или CMake

## Сборка

### С помощью Make

```bash
# Обычная сборка
make

# Сборка с OpenMP
make CXXFLAGS="-std=c++17 -Wall -Wextra -O2 -g -fopenmp"

# Очистка
make clean
```

### С помощью CMake

```bash
mkdir build
cd build
cmake ..
make

# С OpenMP
cmake -DENABLE_OPENMP=ON ..
make
```

## Использование

### Базовое использование

```bash
# Обработка изображения (последовательно)
./bmp_processor example.bmp

# Параллельная обработка
./bmp_processor -p example.bmp

# Параллельная обработка с указанием количества потоков
./bmp_processor -p -t 8 example.bmp
```

### Опции командной строки

- `-p, --parallel` - включить параллельную обработку
- `-t, --threads N` - количество потоков (0 = автоматически)
- `-b, --benchmark` - запустить бенчмарк производительности
- `-h, --help` - показать справку

### Примеры

```bash
# Бенчмарк производительности
./bmp_processor --benchmark

# Обработка с 4 потоками
./bmp_processor -p -t 4 Mandrill.bmp

# Справка
./bmp_processor --help
```

## CI/CD

Проект настроен для автоматической сборки и тестирования на GitHub Actions:

- Сборка с GCC и Clang
- Тестирование с Valgrind для проверки утечек памяти
- Бенчмарки производительности
- Поддержка OpenMP

## Структура проекта

```
├── main.cpp              # Основная программа
├── WorkWithBMP.h         # Заголовочный файл класса BMPImage
├── WorkWithBMP.cpp       # Реализация класса BMPImage
├── Makefile              # Сборка с Make
├── CMakeLists.txt        # Сборка с CMake
├── .github/workflows/    # CI/CD конфигурация
└── README.md             # Документация
```

## Производительность

Распараллеливание особенно эффективно для:
- Больших изображений (высокое разрешение)
- Многоядерных процессоров
- Операций поворота и фильтрации

Используйте `--benchmark` для измерения производительности на вашей системе.

## Автор

Gleb Shikunov  
st128274@student.spbu.ru